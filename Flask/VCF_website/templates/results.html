{% extends "layout.html" %}
{% block search %}
  <style>
    /* Style the tab */
  .tab {
    overflow: hidden;
    border: 1px solid #ccc;
    background-color: #f1f1f1;
  }

  /* Style the buttons inside the tab */
  .tab button {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
    font-size: 17px;
  }

  /* Change background color of buttons on hover */
  .tab button:hover {
    background-color: #ddd;
  }

  /* Create an active/current tablink class */
  .tab button.active {
    background-color: #ccc;
  }
  </style>


  <h1> Results </h1>
  <div class="container col-md-15 col-md-offset-55">
    <div class="table-wrapper">
      <table id="example" class="table table-striped table-bordered" style="width:100%">
          <thead style="position: sticky;top: 0" class="thead-dark">
              <tr>
                  <th class="header" scope="col">Chromosome</th>
                  <th class="header" scope="col">RS ID</th>
                  <th class="header" scope="col">Gene Name</th>
                  <th class="header" scope="col">Position</th>
                  <th class="header" scope="col">Reference allele</th>
                  <th class="header" scope="col">Alternate allele</th>
                  <th class="header" scope="col">Frequencies</th>
              </tr>
          </thead>
           <tbody>
            {% for row in Results %}
              <tr>
                <td>{{ row["chrom"]}}</td>
                <td>{{ row["rs_val"]}}</td>
                <td>{{ row["gene_name"]}}</td>
                <td>{{ row["pos"]}}</td>
                <td>{{ row["ref_allele"] }}</td>
                <td>{{ row["alt_allele"] }} </td>
                <td class="table-elipse table-bordered" data-toggle="collapse" data-target='#{{ row["rs_val"]}}'><i class="fa fa-ellipsis-h text-black-50"></i></td>
              </tr>
              <tr id='{{ row["rs_val"]}}' class="collapse cell-1 row-child">
                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                <td colspan="1"><b>Populations</b></td>
                <td colspan="3"><p style="text-align:center;"><b>Genotype Freqs</b></p></td>
                <td colspan="2"><p style="text-align:center;"><b>Allele Freqs</b></p></td>
              </tr>
              <tr id='{{ row["rs_val"]}}' class="collapse cell-1 row-child">
                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                <td colspan="1">GBR</td>
                {% for row_pop in GBR %}
                  {% if row["rs_val"] == row_pop["rs_val_id"] %}
                    <td colspan="3">{{row_pop["geno_freq"]}}</td>
                    <td colspan="2">{{row_pop["allele_freq"]}}</td>
                  {% endif %}
                {% endfor %}    
              </tr>
              <tr id='{{ row["rs_val"]}}' class="collapse cell-1 row-child">
                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                <td colspan="1">JPT</td>
                {% for row_pop in JPT %}
                  {% if row["rs_val"] == row_pop["rs_val_id"] %}                
                    <td colspan="3">{{row_pop["geno_freq"]}}</td>
                    <td colspan="2">{{row_pop["allele_freq"]}}</td>
                  {% endif %}
                {% endfor %}  
              </tr>
              <tr id='{{ row["rs_val"]}}' class="collapse cell-1 row-child">
                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                <td colspan="1">MXL</td>
                {% for row_pop in MXL %}
                  {% if row["rs_val"] == row_pop["rs_val_id"] %}
                    <td colspan="3">{{row_pop["geno_freq"]}}</td>
                    <td colspan="2">{{row_pop["allele_freq"]}}</td>
                  {% endif %}
                {% endfor %} 
              </tr>
              <tr id='{{ row["rs_val"]}}' class="collapse cell-1 row-child">
                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                <td colspan="1">PJL</td>
                {% for row_pop in PJL %}
                  {% if row["rs_val"] == row_pop["rs_val_id"] %}
                    <td colspan="3">{{row_pop["geno_freq"]}}</td>
                    <td colspan="2">{{row_pop["allele_freq"]}}</td>
                  {% endif %}
                {% endfor %} 
              </tr>
              <tr id='{{ row["rs_val"]}}' class="collapse cell-1 row-child">
                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                <td colspan="1">YRI</td>
                {% for row_pop in YRI %}
                  {% if row["rs_val"] == row_pop["rs_val_id"] %}
                    <td colspan="3">{{row_pop["geno_freq"]}}</td>
                    <td colspan="2">{{row_pop["allele_freq"]}}</td>
                  {% endif %}
                {% endfor %} 
              </tr>
              
            {% endfor %}
          </tbody>
      </table>
    </div>  
  </div>
 
  
    <a href="/download">Download</a>
  </div>
  <form novalidate="novalidate" method="POST" action="">
    {{ form.hidden_tag() }}
                {{ form.stats.label() }}
                {% if form.stats.errors %}
                    {{ form.stats(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.stats.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.stats(style="list-style-type: none") }}
                {% endif %}

                {{ form.populations.label() }}
                {% if form.populations.errors %}
                    {{ form.populations(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.populations.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.populations(style="list-style-type: none") }}
                {% endif %}
          <div class="form-group">
              {{ form.pop_stat(class="btn btn-outline-info mt-3") }}
          </div>
  </form>
  <script>
    function openCity(evt, cityName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(cityName).style.display = "block";
      evt.currentTarget.className += " active";
    }

    // Get the element with id="defaultOpen" and click on it
    document.getElementById("defaultOpen").click();
  </script>
{% endblock search %}
{% block carousel%}
  <div class="change-width">
    <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="..\static\profile_pics\198663.jpg" class="d-block w-100" alt="...">
          </div>
          <div class="carousel-item">
            <img src="..\static\profile_pics\wallpaper.jpg" class="d-block w-100" alt="...">
          </div>
          <div class="carousel-item">
            <img src="..\static\profile_pics\outer space gods 2560x1440 wallpaper_www.wallpaperhi.com_7.jpg" class="d-block w-100" alt="...">
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
    </div>
  </div>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
{% endblock carousel %}
